<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8) ]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>SSL bypass with HttpUnit | Trajano</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://www.trajano.net/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://www.trajano.net/wp-content/themes/twentyfourteen/js/html5.js"></script>
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="Trajano &raquo; Feed" href="http://www.trajano.net/feed/" />
<link rel="alternate" type="application/rss+xml" title="Trajano &raquo; Comments Feed" href="http://www.trajano.net/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Trajano &raquo; SSL bypass with HttpUnit Comments Feed" href="http://www.trajano.net/2006/07/ssl-bypass-with-httpunit/feed/" />
<link rel='stylesheet' id='crayon-css'  href='http://www.trajano.net/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.4.3' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='http://www.trajano.net/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=2.4.3' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-consolas-css'  href='http://www.trajano.net/wp-content/plugins/crayon-syntax-highlighter/fonts/consolas.css?ver=2.4.3' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfourteen-lato-css'  href='//fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='http://www.trajano.net/wp-content/themes/twentyfourteen/genericons/genericons.css?ver=3.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfourteen-style-css'  href='http://www.trajano.net/wp-content/themes/twentyfourteen/style.css?ver=3.8.1' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfourteen-ie-css'  href='http://www.trajano.net/wp-content/themes/twentyfourteen/css/ie.css?ver=20131205' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='http://www.trajano.net/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script>
<script type='text/javascript' src='http://www.trajano.net/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://www.trajano.net/wp-content/plugins/amazon-product-in-a-post-plugin/js/amazon-lightbox.js?ver=3.8.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.4.3","is_admin":"0","ajaxurl":"http:\/\/www.trajano.net\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.trajano.net/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=2.4.3'></script>
<script type='text/javascript' src='http://www.trajano.net/wp-includes/js/comment-reply.min.js?ver=3.8.1'></script>
<script type='text/javascript' src='http://www.trajano.net/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.4.7.3'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.trajano.net/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.trajano.net/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Relocated' href='http://www.trajano.net/2006/06/relocated/' />
<link rel='next' title='Ant default exclusions and ClearCase' href='http://www.trajano.net/2006/07/ant-default-exclusions-and-clearcase/' />
<meta name="generator" content="WordPress 3.8.1" />
<link rel='canonical' href='http://www.trajano.net/2006/07/ssl-bypass-with-httpunit/' />
<link rel='shortlink' href='http://www.trajano.net/?p=83' />
<!-- Amazon Product In a Post Plugin Styles & Scripts - Version 3.5.2 -->
<link rel="stylesheet" href="http://www.trajano.net/index.php?apipp_style=default" type="text/css" media="screen" />
<link rel="stylesheet" href="http://www.trajano.net/wp-content/plugins/amazon-product-in-a-post-plugin/css/amazon-lightbox.css" type="text/css" media="screen" />
<!-- End Amazon Product In a Post Plugin Styles & Scripts-->
	<style type="text/css" id="twentyfourteen-header-css">
			.site-title,
		.site-description {
			clip: rect(1px 1px 1px 1px); /* IE7 */
			clip: rect(1px, 1px, 1px, 1px);
			position: absolute;
		}
		</style>
	<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #f5f5f5; }
</style>
<!-- Google Analytics Tracking by Google Analyticator 6.4.7.3: http://www.videousermanuals.com/google-analyticator/ -->
<script type="text/javascript">
                var analyticsFileTypes = [''];
                            var analyticsSnippet = 'disabled';
                var analyticsEventTracking = 'enabled';
            </script>
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	
	ga('create', 'UA-32387215-1', 'auto');
   
	ga('send', 'pageview');
  
</script>
</head>

<body class="single single-post postid-83 single-format-standard custom-background header-image singular">
<div id="page" class="hfeed site">
		<div id="site-header">
		<a href="http://www.trajano.net/" rel="home">
			<img src="http://www.trajano.net/wp-content/uploads/2014/01/logo-blog-twentyfourteen1.png" width="1260" height="120" alt="">
		</a>
	</div>
	
	<header id="masthead" class="site-header" role="banner">
		<div class="header-main">
			<h1 class="site-title"><a href="http://www.trajano.net/" rel="home">Trajano</a></h1>

			<div class="search-toggle">
				<a href="#search-container" class="screen-reader-text">Search</a>
			</div>

			<nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation">
				<h1 class="menu-toggle">Primary Menu</h1>
				<a class="screen-reader-text skip-link" href="#content">Skip to content</a>
				<div class="nav-menu"><ul><li class="page_item page-item-2"><a href="http://www.trajano.net/sample-page/">Rebuild status</a></li></ul></div>
			</nav>
		</div>

		<div id="search-container" class="search-box-wrapper hide">
			<div class="search-box">
				<form role="search" method="get" class="search-form" action="http://www.trajano.net/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>			</div>
		</div>
	</header><!-- #masthead -->

	<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">
			
<article id="post-83" class="post-83 post type-post status-publish format-standard hentry category-programming tag-httpunit tag-java tag-ssl tag-unit-testing">
	
	<header class="entry-header">
				<div class="entry-meta">
			<span class="cat-links"><a href="http://www.trajano.net/category/programming/" title="View all posts in Programming" rel="category tag">Programming</a></span>
		</div>
		<h1 class="entry-title">SSL bypass with HttpUnit</h1>
		<div class="entry-meta">
			<span class="entry-date"><a href="http://www.trajano.net/2006/07/ssl-bypass-with-httpunit/" rel="bookmark"><time class="entry-date" datetime="2006-07-02T09:43:59+00:00">July 2, 2006</time></a></span> <span class="byline"><span class="author vcard"><a class="url fn n" href="http://www.trajano.net/author/trajano/" rel="author">trajano</a></span></span>			<span class="comments-link"><a href="http://www.trajano.net/2006/07/ssl-bypass-with-httpunit/#respond" title="Comment on SSL bypass with HttpUnit"><span class="dsq-postid" rel="83 http://www.trajano.net/?p=83">Leave a comment</span></a></span>
					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>I thought I would revisit my old application which did an SSL bypass discussed in <a href="http://www.amazon.ca/gp/product/0201752808/ref=as_li_ss_tl?ie=UTF8&#038;camp=15121&#038;creative=390961&#038;creativeASIN=0201752808&#038;linkCode=as2&#038;tag=archimedestra-20">The Java Developers Almanac 1.4, Volume 1: Examples and Quick Reference (4th Edition)</a> because I wanted to do another small app that would require an SSL bypass. Along with that idea, I thought of using HttpUnit so I don&#8217;t have to write my own parsing routines. Unfortunately, there was a problem. Namely, the bypass didn&#8217;t work and it was requesting the certificate.<br />
<span id="more-83"></span><br />
This was the first time I am doing the SSL bypass with <a href="http://httpunit.sourceforge.net/">HttpUnit</a>. After searching Google I found that <a href="http://life.neophi.com/danielr/2005/10/https_testing_with_jwebunit.html">someone else</a> had the same problem, although their solution required the use of deprecated classes/methods. So I wanted to see if there was a different way of doing things. After digging though the code for HttpUnit, specifically <a href="http://httpunit.cvs.sourceforge.net/httpunit/httpunit/src/com/meterware/httpunit/HttpsProtocolSupport.java?revision=1.1&amp;view=markup">HttpsProtocolSupport</a>, I noticed a couple of lines explicitly referencing classes in the &#8220;com.sun&#8221; package:</p>
<p></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-52f6cf45e4c22318352538" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
/** The name of the JSSE class which provides support for SSL. **/
private final static String SunJSSE_PROVIDER_CLASS = "com.sun.net.ssl.internal.ssl.Provider";

/** The name of the JSSE class which supports the https protocol. **/
private final static String SSL_PROTOCOL_HANDLER   = "com.sun.net.ssl.internal.www.protocol";</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-52f6cf45e4c22318352538-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c22318352538-2">2</div><div class="crayon-num" data-line="crayon-52f6cf45e4c22318352538-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c22318352538-4">4</div><div class="crayon-num" data-line="crayon-52f6cf45e4c22318352538-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-52f6cf45e4c22318352538-1"><span class="crayon-c">/** The name of the JSSE class which provides support for SSL. **/</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c22318352538-2"><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">SunJSSE_PROVIDER_CLASS</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"com.sun.net.ssl.internal.ssl.Provider"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c22318352538-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c22318352538-4"><span class="crayon-c">/** The name of the JSSE class which supports the https protocol. **/</span></div><div class="crayon-line" id="crayon-52f6cf45e4c22318352538-5"><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">SSL_PROTOCOL_HANDLER</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"com.sun.net.ssl.internal.www.protocol"</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p></p>
<p>And digging a bit further I found out that if I modified the system property <code>java.protocol.handler.pkgs</code> to be <code>javax.net.ssl|<b>com.sun.net.www.protocol</b>|com.sun.net.ssl.internal.www.protocol</code> the application works. The problem with that approach is the explicit naming of Sun packages which means that alternative JVMs would likely fail. It turns out that the registration of the SSL protocol handler is done on the <em>first</em> invocation of URL.openConnection() with an HTTPS protocol. HttpUnit changes the protocol handler order before invoking the URL.openConnection() that is what makes it use the wrong protocol handler. To fix this, I had to do was force URL.openConnection() before HttpUnit performs any of its tasks. This is as simple as:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-52f6cf45e4c2b075013297" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
try {
new URL("https://0.0.0.0/").getContent();
} catch (IOException e) {
// Ignore exception
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-52f6cf45e4c2b075013297-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2b075013297-2">2</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2b075013297-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2b075013297-4">4</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2b075013297-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-52f6cf45e4c2b075013297-1"><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2b075013297-2"><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">URL</span><span class="crayon-sy">(</span><span class="crayon-s">"https://0.0.0.0/"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getContent</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2b075013297-3"><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">IOException</span><span class="crayon-h"> </span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2b075013297-4"><span class="crayon-c">// Ignore exception</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2b075013297-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
<p>That is all that is needed to get the certificate check bypass to work. The full source is as follows:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-52f6cf45e4c2f164807227" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import java.io.IOException;
import java.net.URL;
import java.security.KeyManagementException;
import java.security.NoSuchAlgorithmException;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

public final class DisableSSLCertificateCheckUtil {
/**
 * Prevent instantiation of utility class.
 */
private DisableSSLCertificateCheckUtil() {

}

/**
 * Trust manager that does not perform nay checks.
 */
private static class NullX509TrustManager implements X509TrustManager {
 public void checkClientTrusted(X509Certificate[] chain, String authType)
   throws CertificateException {
 }

 public void checkServerTrusted(X509Certificate[] chain, String authType)
   throws CertificateException {
 }

 public X509Certificate[] getAcceptedIssuers() {
  return new X509Certificate[0];
 }

}

/**
 * Host name verifier that does not perform nay checks.
 */
private static class NullHostnameVerifier implements HostnameVerifier {
 public boolean verify(String hostname, SSLSession session) {
  return true;
 }
}

/**
 * Disable trust checks for SSL connections.
 */
public static void disableChecks() throws NoSuchAlgorithmException,
  KeyManagementException {

 try {
  new URL("https://0.0.0.0/").getContent();
 } catch (IOException e) {
  // This invocation will always fail, but it will register the
  // default SSL provider to the URL class.
 }

 SSLContext context = SSLContext.getInstance("SSLv3");
 TrustManager[] trustManagerArray = { new NullX509TrustManager() };
 context.init(null, trustManagerArray, null);

 HttpsURLConnection.setDefaultSSLSocketFactory(context
   .getSocketFactory());
 HttpsURLConnection
   .setDefaultHostnameVerifier(new NullHostnameVerifier());
}
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-2">2</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-4">4</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-6">6</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-8">8</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-10">10</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-12">12</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-14">14</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-16">16</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-18">18</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-20">20</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-22">22</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-24">24</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-26">26</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-28">28</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-30">30</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-32">32</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-34">34</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-36">36</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-38">38</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-40">40</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-42">42</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-44">44</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-46">46</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-48">48</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-50">50</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-52">52</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-54">54</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-56">56</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-58">58</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-60">60</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-62">62</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-64">64</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-66">66</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-68">68</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-70">70</div><div class="crayon-num" data-line="crayon-52f6cf45e4c2f164807227-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-52f6cf45e4c2f164807227-72">72</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-1"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">io</span><span class="crayon-sy">.</span><span class="crayon-i">IOException</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-2"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-i">URL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-3"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">security</span><span class="crayon-sy">.</span><span class="crayon-i">KeyManagementException</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-4"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">security</span><span class="crayon-sy">.</span><span class="crayon-i">NoSuchAlgorithmException</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-5"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">security</span><span class="crayon-sy">.</span><span class="crayon-v">cert</span><span class="crayon-sy">.</span><span class="crayon-i">CertificateException</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-6"><span class="crayon-e">import </span><span class="crayon-v">java</span><span class="crayon-sy">.</span><span class="crayon-v">security</span><span class="crayon-sy">.</span><span class="crayon-v">cert</span><span class="crayon-sy">.</span><span class="crayon-i">X509Certificate</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-8"><span class="crayon-e">import </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ssl</span><span class="crayon-sy">.</span><span class="crayon-i">HostnameVerifier</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-9"><span class="crayon-e">import </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ssl</span><span class="crayon-sy">.</span><span class="crayon-i">HttpsURLConnection</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-10"><span class="crayon-e">import </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ssl</span><span class="crayon-sy">.</span><span class="crayon-i">SSLContext</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-11"><span class="crayon-e">import </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ssl</span><span class="crayon-sy">.</span><span class="crayon-i">SSLSession</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-12"><span class="crayon-e">import </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ssl</span><span class="crayon-sy">.</span><span class="crayon-i">TrustManager</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-13"><span class="crayon-e">import </span><span class="crayon-v">javax</span><span class="crayon-sy">.</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">ssl</span><span class="crayon-sy">.</span><span class="crayon-i">X509TrustManager</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-14">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-15"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">final</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">DisableSSLCertificateCheckUtil</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-16"><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-17"><span class="crayon-c"> * Prevent instantiation of utility class.</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-18"><span class="crayon-c"> */</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-19"><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-e">DisableSSLCertificateCheckUtil</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-20">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-21"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-22">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-23"><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-24"><span class="crayon-c"> * Trust manager that does not perform nay checks.</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-25"><span class="crayon-c"> */</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-26"><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">NullX509TrustManager</span><span class="crayon-h"> </span><span class="crayon-r">implements</span><span class="crayon-h"> </span><span class="crayon-e">X509TrustManager</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-27"><span class="crayon-h"> </span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">checkClientTrusted</span><span class="crayon-sy">(</span><span class="crayon-v">X509Certificate</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-i">chain</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-i">authType</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-28"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">throws</span><span class="crayon-h"> </span><span class="crayon-e">CertificateException</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-29"><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-30">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-31"><span class="crayon-h"> </span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">checkServerTrusted</span><span class="crayon-sy">(</span><span class="crayon-v">X509Certificate</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-i">chain</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-i">authType</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-32"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-e">throws</span><span class="crayon-h"> </span><span class="crayon-e">CertificateException</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-33"><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-34">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-35"><span class="crayon-h"> </span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-v">X509Certificate</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">getAcceptedIssuers</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-36"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">X509Certificate</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-37"><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-38">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-39"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-40">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-41"><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-42"><span class="crayon-c"> * Host name verifier that does not perform nay checks.</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-43"><span class="crayon-c"> */</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-44"><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">NullHostnameVerifier</span><span class="crayon-h"> </span><span class="crayon-r">implements</span><span class="crayon-h"> </span><span class="crayon-e">HostnameVerifier</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-45"><span class="crayon-h"> </span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">boolean</span><span class="crayon-h"> </span><span class="crayon-e">verify</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-i">hostname</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">SSLSession </span><span class="crayon-i">session</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-46"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-47"><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-48"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-49">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-50"><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-51"><span class="crayon-c"> * Disable trust checks for SSL connections.</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-52"><span class="crayon-c"> */</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-53"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">disableChecks</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">throws </span><span class="crayon-i">NoSuchAlgorithmException</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-54"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">KeyManagementException</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-55">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-56"><span class="crayon-h"> </span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-57"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">URL</span><span class="crayon-sy">(</span><span class="crayon-s">"https://0.0.0.0/"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">getContent</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-58"><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">IOException</span><span class="crayon-h"> </span><span class="crayon-i">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-59"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">// This invocation will always fail, but it will register the</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-60"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">// default SSL provider to the URL class.</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-61"><span class="crayon-h"> </span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-62">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-63"><span class="crayon-h"> </span><span class="crayon-e">SSLContext </span><span class="crayon-v">context</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">SSLContext</span><span class="crayon-sy">.</span><span class="crayon-e">getInstance</span><span class="crayon-sy">(</span><span class="crayon-s">"SSLv3"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-64"><span class="crayon-h"> </span><span class="crayon-v">TrustManager</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">trustManagerArray</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">NullX509TrustManager</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">}</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-65"><span class="crayon-h"> </span><span class="crayon-v">context</span><span class="crayon-sy">.</span><span class="crayon-e">init</span><span class="crayon-sy">(</span><span class="crayon-t">null</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">trustManagerArray</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-66">&nbsp;</div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-67"><span class="crayon-h"> </span><span class="crayon-v">HttpsURLConnection</span><span class="crayon-sy">.</span><span class="crayon-e">setDefaultSSLSocketFactory</span><span class="crayon-sy">(</span><span class="crayon-v">context</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-68"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-sy">.</span><span class="crayon-e">getSocketFactory</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-69"><span class="crayon-h"> </span><span class="crayon-v">HttpsURLConnection</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-70"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-sy">.</span><span class="crayon-e">setDefaultHostnameVerifier</span><span class="crayon-sy">(</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">NullHostnameVerifier</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-52f6cf45e4c2f164807227-71"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-52f6cf45e4c2f164807227-72"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0079 seconds] -->
<p></p>
<p>But I think the proper way of fixing this is to patch up HttpsProtocolSupport. I have sent in a <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1516007&amp;group_id=6550&amp;atid=106550">bug report</a> <b>and a <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1520925&amp;group_id=6550&amp;atid=306550">patch</a></b>for it already. For those who don&#8217;t know how this works, here&#8217;s a short blurb. Before setting the bypass, the HTTPS URL Provider has to be set so it does not change later on by HttpUnit. That is what the URL.getContent() in the try/catch block is for. The bypass is then implemented by creating a new X509TrustManager implementation that does not perform any check at all. So it will silently pass any certificate whether it is valid or not. Though for production environments this is not recommended, it is useful for test environments and prevents having the developer update their CACert file to contain self signed certificates. The SSLContext.getInstance() method retrieves an existing SSLContext for the SSLv3 protocol. This is the most common protocol used in most web servers, but others such as TLS can be used if needed. The context gets reinitialized with the custom X509TrustManager that does not perform any checks and a socket factory is created from it which is set as the default socket factory for the HttpsURLConnection. A custom HostnameVerifier is also created for URLs that only contain IP addresses or servers that use dummy certificates such as WebSphere. The custom HostnameVerifier, like the custom X509TrustManager, just accepts any hostname as valid and does not perform any checks. The final step is to associate the custom SocketFactory and HostnameVerifier as the defaults to the HttpsURLConnection. To invoke the code it is a matter of invoking the static method as follows:</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-52f6cf45e4c35388792538" class="crayon-syntax crayon-theme-classic crayon-font-consolas crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
DisableSSLCertificateCheckUtil.disableChecks();</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-52f6cf45e4c35388792538-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-52f6cf45e4c35388792538-1"><span class="crayon-v">DisableSSLCertificateCheckUtil</span><span class="crayon-sy">.</span><span class="crayon-e">disableChecks</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>This method has been tested on HttpUnit 1.6.2 and Sun JDK 1.5. I have recently updated it to work with JDK 7 and put it as part of my <a href="http://site.trajano.net/commons-testing">Commons Testing</a> artifact.  If you try it on a different environment please post a comment to let me know.</p>
	<br /><table cellpadding="0" class="amazon-product-table">
		<tr>
			<td valign="top">
				<div class="amazon-image-wrapper">
					<a href="http://www.amazon.ca/The-Java%C2%BF-Developers-Almanac-Volume/dp/0201752808%3FSubscriptionId%3D1Y1GW7AXX5GAHR3PSQ02%26tag%3Darchimedestra-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D0201752808" ><img src="http://ecx.images-amazon.com/images/I/51JWAFCZWAL._SL160_.jpg" class="amazon-image amazon-image" /></a><br />
					<a rel="appiplightbox-0201752808" href="http://ecx.images-amazon.com/images/I/51JWAFCZWAL.jpg"><span class="amazon-tiny">See larger image</span></a>
				</div>
				<div class="amazon-buying">
					<h2 class="amazon-asin-title"><a href="http://www.amazon.ca/The-Java%C2%BF-Developers-Almanac-Volume/dp/0201752808%3FSubscriptionId%3D1Y1GW7AXX5GAHR3PSQ02%26tag%3Darchimedestra-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D0201752808" ><span class="asin-title">The Java Developers Almanac 1.4, Volume 1: Examples and Quick Reference (4th Edition) (Paperback)</span></a></h2>
					<span class="amazon-author">By (author):</span> Patrick Chan</span><br />
				</div>
				<hr noshade="noshade" size="1" />
				<div align="left">
					<table class="amazon-product-price" cellpadding="0">
						<tr>
							<td class="amazon-list-price-label">List Price:</td>
							<td class="amazon-list-price">CDN$ 36.99 CAD</td>
						</tr>
						<tr>
							<td class="amazon-new-label">New From:</td>
							<td class="amazon-new">CDN$ 21.59 CAD <span class="instock">In Stock</span></td>
						</tr>
						<tr>
							<td class="amazon-used-label">Used from:</td>
						<td class="amazon-used">CDN$ 0.01 CAD <span class="instock">In Stock</span></td>
						</tr>
						<tr>
							<td valign="top" colspan="2">
								<div class="amazon-dates">
									<br /><div><a style="display:block;margin-top:8px;margin-bottom:5px;width:165px;"  href="http://www.amazon.ca/The-Java%C2%BF-Developers-Almanac-Volume/dp/0201752808%3FSubscriptionId%3D1Y1GW7AXX5GAHR3PSQ02%26tag%3Darchimedestra-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D0201752808"><img src="http://www.trajano.net/wp-content/plugins/amazon-product-in-a-post-plugin/images/buyamzon-button-plain.png" border="0" style="border:0 none !important;margin:0px !important;background:transparent !important;" /></a></div>
								</div>
							</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
	</table>
<!-- APPIP Item Cached [3925.000000] -->
<div class="appip-multi-divider"><!--appip divider--></div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta"><span class="tag-links"><a href="http://www.trajano.net/tag/httpunit/" rel="tag">httpunit</a><a href="http://www.trajano.net/tag/java/" rel="tag">java</a><a href="http://www.trajano.net/tag/ssl/" rel="tag">ssl</a><a href="http://www.trajano.net/tag/unit-testing/" rel="tag">unit testing</a></span></footer></article><!-- #post-## -->
	<nav class="navigation post-navigation" role="navigation">
		<h1 class="screen-reader-text">Post navigation</h1>
		<div class="nav-links">
			<a href="http://www.trajano.net/2006/06/relocated/" rel="prev"><span class="meta-nav">Previous Post</span>Relocated</a><a href="http://www.trajano.net/2006/07/ant-default-exclusions-and-clearcase/" rel="next"><span class="meta-nav">Next Post</span>Ant default exclusions and ClearCase</a>		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
<div id="disqus_thread">
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://www.trajano.net/2006/07/ssl-bypass-with-httpunit/';
    var disqus_identifier = '83 http://www.trajano.net/?p=83';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'trajano';
    var disqus_title = "SSL bypass with HttpUnit";
        var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /*
           All currently supported events:
            * preData  fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = '?cf_action=sync_comments&post_id=83';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/www.trajano.net\/2006\/07\/ssl-bypass-with-httpunit\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/embed.js?pname=wordpress&pver=2.74';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>
		</div><!-- #content -->
	</div><!-- #primary -->

<div id="content-sidebar" class="content-sidebar widget-area" role="complementary">
	<aside id="text-2" class="widget widget_text"><h1 class="widget-title">Notice to recruiters</h1>			<div class="textwidget"><p>I am primarily interested in telecommute work, I am not interested in relocating.</p>
<p>If the job is for working anywhere in the GTA that is not telecommute my rate starts at $150/hr.</p>
</div>
		</aside><aside id="seed_glcse_widget-2" class="widget widget_seed_glcse_widget">		<div class="glcse-widget">
		<form id="glcse-search-form" class="glcse-search" action="http://www.trajano.net" method="get">
        <input type="hidden" name="cref" value="http://www.trajano.net/?glcse=1" />
        <input type="hidden" name="cof" value="FORID:11" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input type="text" name="q" size="31" />
        <input type="hidden" name="s" value="glcse" />
    	</form>
    	<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=glcse-search-form&lang=en"></script>
    	</div>
    	</aside><aside id="meta-3" class="widget widget_meta"><h1 class="widget-title">Meta</h1>			<ul>
						<li><a href="http://www.trajano.net/wp-login.php">Log in</a></li>
			<li><a href="http://www.trajano.net/feed/" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://trajano.disqus.com/latest.rss" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>						</ul>
</aside></div><!-- #content-sidebar -->
<div id="secondary">
		<h2 class="site-description">Just another WordPress site</h2>
	
	
		<div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary">
		<aside id="categories-3" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-26"><a href="http://www.trajano.net/category/anime/" title="View all posts filed under Anime">Anime</a> (1)
</li>
	<li class="cat-item cat-item-35"><a href="http://www.trajano.net/category/explaining-tech/" title="View all posts filed under Explaining Tech">Explaining Tech</a> (1)
</li>
	<li class="cat-item cat-item-25"><a href="http://www.trajano.net/category/gaming/" title="My other hobby, playing video games.">Gaming</a> (1)
</li>
	<li class="cat-item cat-item-32"><a href="http://www.trajano.net/category/hmm/" title="Things that make me go hmm...">Hmm&#8230;</a> (3)
</li>
	<li class="cat-item cat-item-6"><a href="http://www.trajano.net/category/programming/" title="Stuff about stringing ones and zeroes together to form something useful.  Contains some elaborations of the answers I post on Stack Overflow">Programming</a> (11)
</li>
	<li class="cat-item cat-item-28"><a href="http://www.trajano.net/category/techie/" title="View all posts filed under Techie">Techie</a> (1)
</li>
	<li class="cat-item cat-item-1"><a href="http://www.trajano.net/category/uncategorized/" title="View all posts filed under Uncategorized">Uncategorized</a> (14)
</li>
		</ul>
</aside><aside id="tag_cloud-2" class="widget widget_tag_cloud"><h1 class="widget-title">Tags</h1><div class="tagcloud"><a href='http://www.trajano.net/tag/android/' class='tag-link-18' title='1 topic' style='font-size: 8pt;'>android</a>
<a href='http://www.trajano.net/tag/ant/' class='tag-link-22' title='1 topic' style='font-size: 8pt;'>ant</a>
<a href='http://www.trajano.net/tag/clearcase/' class='tag-link-23' title='1 topic' style='font-size: 8pt;'>clearcase</a>
<a href='http://www.trajano.net/tag/cloud-computing/' class='tag-link-36' title='1 topic' style='font-size: 8pt;'>cloud computing</a>
<a href='http://www.trajano.net/tag/curam/' class='tag-link-2' title='7 topics' style='font-size: 22pt;'>curam</a>
<a href='http://www.trajano.net/tag/database/' class='tag-link-17' title='1 topic' style='font-size: 8pt;'>database</a>
<a href='http://www.trajano.net/tag/eclipse/' class='tag-link-15' title='1 topic' style='font-size: 8pt;'>eclipse</a>
<a href='http://www.trajano.net/tag/elasticsearch/' class='tag-link-29' title='1 topic' style='font-size: 8pt;'>elasticsearch</a>
<a href='http://www.trajano.net/tag/ford-focus/' class='tag-link-41' title='1 topic' style='font-size: 8pt;'>ford focus</a>
<a href='http://www.trajano.net/tag/httpunit/' class='tag-link-21' title='1 topic' style='font-size: 8pt;'>httpunit</a>
<a href='http://www.trajano.net/tag/internet-explorer-6/' class='tag-link-8' title='1 topic' style='font-size: 8pt;'>internet explorer 6</a>
<a href='http://www.trajano.net/tag/iphone/' class='tag-link-19' title='1 topic' style='font-size: 8pt;'>iphone</a>
<a href='http://www.trajano.net/tag/java/' class='tag-link-10' title='2 topics' style='font-size: 12.2pt;'>java</a>
<a href='http://www.trajano.net/tag/java-ee/' class='tag-link-11' title='1 topic' style='font-size: 8pt;'>java ee</a>
<a href='http://www.trajano.net/tag/jax-ws/' class='tag-link-12' title='1 topic' style='font-size: 8pt;'>jax-ws</a>
<a href='http://www.trajano.net/tag/logstash/' class='tag-link-30' title='1 topic' style='font-size: 8pt;'>logstash</a>
<a href='http://www.trajano.net/tag/m2e/' class='tag-link-13' title='1 topic' style='font-size: 8pt;'>m2e</a>
<a href='http://www.trajano.net/tag/maven/' class='tag-link-14' title='1 topic' style='font-size: 8pt;'>maven</a>
<a href='http://www.trajano.net/tag/oracle/' class='tag-link-16' title='1 topic' style='font-size: 8pt;'>oracle</a>
<a href='http://www.trajano.net/tag/rails/' class='tag-link-5' title='1 topic' style='font-size: 8pt;'>rails</a>
<a href='http://www.trajano.net/tag/sakura-wars/' class='tag-link-27' title='1 topic' style='font-size: 8pt;'>sakura wars</a>
<a href='http://www.trajano.net/tag/selenium/' class='tag-link-39' title='1 topic' style='font-size: 8pt;'>selenium</a>
<a href='http://www.trajano.net/tag/ssl/' class='tag-link-20' title='1 topic' style='font-size: 8pt;'>ssl</a>
<a href='http://www.trajano.net/tag/subversion/' class='tag-link-38' title='1 topic' style='font-size: 8pt;'>subversion</a>
<a href='http://www.trajano.net/tag/testing/' class='tag-link-40' title='1 topic' style='font-size: 8pt;'>testing</a>
<a href='http://www.trajano.net/tag/toronto/' class='tag-link-33' title='1 topic' style='font-size: 8pt;'>toronto</a>
<a href='http://www.trajano.net/tag/trails/' class='tag-link-4' title='1 topic' style='font-size: 8pt;'>trails</a>
<a href='http://www.trajano.net/tag/tynamo/' class='tag-link-7' title='1 topic' style='font-size: 8pt;'>tynamo</a>
<a href='http://www.trajano.net/tag/unit-testing/' class='tag-link-3' title='2 topics' style='font-size: 12.2pt;'>unit testing</a>
<a href='http://www.trajano.net/tag/version-control/' class='tag-link-24' title='2 topics' style='font-size: 12.2pt;'>version control</a>
<a href='http://www.trajano.net/tag/web/' class='tag-link-9' title='1 topic' style='font-size: 8pt;'>web</a>
<a href='http://www.trajano.net/tag/web-services/' class='tag-link-37' title='1 topic' style='font-size: 8pt;'>web services</a>
<a href='http://www.trajano.net/tag/windows/' class='tag-link-31' title='1 topic' style='font-size: 8pt;'>windows</a></div>
</aside>	</div><!-- #primary-sidebar -->
	</div><!-- #secondary -->

		</div><!-- #main -->

		<footer id="colophon" class="site-footer" role="contentinfo">

			
			<div class="site-info">
								<a href="http://wordpress.org/">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	<script type='text/javascript' src='http://www.trajano.net/wp-content/themes/twentyfourteen/js/functions.js?ver=20131209'></script>
</body>
</html>